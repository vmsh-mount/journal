@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-[rgb(246,245,233)] text-text font-sans leading-relaxed text-base;
  }
}

@layer components {
  .container {
    @apply w-full max-w-content mx-auto px-4;
  }
  
  .site-header {
    @apply pt-8 pb-4;
  }
  
  .site-title {
    @apply text-4xl font-semibold m-0;
  }
  
  .site-title a {
    @apply text-text no-underline;
  }
  
  .site-nav {
    @apply mt-2 text-[0.95rem];
  }
  
  .site-nav a {
    @apply mr-4 text-text-muted no-underline;
  }
  
  .site-nav a:hover {
    @apply text-text;
  }

  .site-header {
      @apply w-full max-w-content mx-auto px-4 pt-6 pb-3;
  }

  .site-nav {
      @apply flex flex-wrap justify-center items-center text-[0.75rem] tracking-[0.12em] gap-2;
      width: 100%;
  }

  .site-nav a {
      @apply font-semibold text-text-muted no-underline hover:text-text transition-colors px-2 py-1 whitespace-nowrap;
      flex: 0 0 auto;
  }
  
  main h1, main h2, main h3 {
    @apply mt-8 mb-4 font-medium;
  }
  
  main p {
    @apply mb-6 text-[1.05rem] text-text;
  }

  .page-heading {
    @apply font-serif font-normal text-8xl leading-none text-center mt-16 mb-6;
  }

  .page-heading-subtitle {
    @apply text-text-muted text-center text-[1.2rem] italic mb-12;
  }
  
  .post-list {
    @apply list-none p-0 m-0;
  }
  
  .post-item {
    @apply mb-8;
  }
  
  .post-item-title {
    @apply text-[1.4rem] mb-1;
  }
  
  .post-item-title a {
    @apply text-text no-underline;
  }
  
  .post-item-summary {
    @apply text-text-muted text-[0.95rem];
  }

  .home-container {
    @apply w-full flex flex-col items-center justify-center text-center mt-20;
  }

  .home-intro-title {
    @apply font-serif font-semibold italic text-[1.75rem] leading-snug;
    color: #3A2E1F;
    letter-spacing: -0.01em;
  }

  .home-intro-body {
    @apply font-serif text-[1rem] leading-relaxed mb-6 mt-10;
    color: #4A4A3C;
  }
  
  .article-title {
    @apply font-semibold font-sans text-[6rem] leading-none mb-8 text-center;
    width: 150%;
    margin-left: -25%;
    margin-right: -25%;
  }
  
  .article-meta {
    @apply text-text-muted text-[0.9rem] mb-8;
  }

  .article-meta-separator {
    @apply my-4 border-t border-gray-300 opacity-60;
    width: 60%;
    margin-left: auto;
    margin-right: 0;
  }
  
  .article-body {
    @apply pt-4 max-w-prose font-serif;
  }
  
  article h2, article h3 {
    @apply mt-7 mb-3;
  }
  
  article p {
    @apply mb-6 text-[1.05rem];
  }
  
  .article-content {
    @apply leading-relaxed font-serif text-text opacity-90;
  }
  
  .article-content h2 {
    @apply mt-8 mb-4 text-xl font-medium;
  }
  
  .article-content h3 {
    @apply mt-6 mb-3 text-lg font-medium;
  }
  
  .article-content p {
    @apply mb-6;
  }
  
  .article-content ul, .article-content ol {
    @apply mb-6 ml-6;
  }
  
  .article-content li {
    @apply mb-2;
  }
  
  .article-content code {
    @apply bg-gray-100 px-1 py-0.5 rounded text-sm font-mono;
  }
  
  .article-content pre {
    @apply bg-gray-100 p-4 rounded mb-6 overflow-x-auto;
  }
  
  .article-content pre code {
    @apply bg-transparent p-0;
  }
  
  .article-content a {
    @apply text-text underline;
  }
  
  .article-content blockquote {
    @apply border-l-4 border-gray-300 pl-4 italic my-6 text-text-muted;
  }

  .articles-shell {
    @apply relative;
  }

  .articles-grid {
    @apply flex flex-col;
  }

  .articles-years {
    @apply hidden md:block font-mono text-[1rem] uppercase text-text-muted text-right;
    position: absolute;
    left: -75px;
    top: 0;
  }

  .articles-years ul {
    @apply space-y-1;
  }

  .articles-years li {
    @apply leading-6;
  }

  .years-link {
    @apply text-text-muted no-underline;
  }

  .years-link:hover {
    @apply text-text;
  }

  .articles-tags {
    @apply hidden md:block text-[0.8rem] text-text-muted leading-relaxed;
    position: absolute;
    right: -240px;
    width: 200px;
    text-align: left;
  }

  .article-tags {
      @apply flex flex-wrap gap-2;
      margin-top: -1rem;
      margin-bottom: 1rem;
  }

  .tag-link {
    @apply text-sm text-text-muted no-underline
           hover:text-blue-500 dark:hover:text-blue-400
           transition-colors;
    display: block;
    line-height: 1.4;
  }
  
  .sidebar-heading {
    @apply font-mono text-[0.7rem] uppercase tracking-wider text-text-muted mb-3;
  }
  
  .tags-container {
    @apply flex flex-wrap gap-1.5;
  }
  
  .filter-tag {
    @apply inline-flex items-center px-2 py-0.5 rounded-full text-xs text-text-muted border border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-400 transition-colors;
    cursor: pointer;
    white-space: nowrap;
  }
  
  .filter-tag:hover {
    @apply text-blue-500 dark:text-blue-400;
  }
  
  .filter-tag.active {
    @apply border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400;
  }
  
  .tag-count {
    @apply ml-0.5 text-[0.7rem] opacity-70;
  }
  
  .active-filters {
    @apply flex flex-wrap items-center gap-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg mb-6;
  }
  
  .remove-filter {
    @apply ml-1 text-base leading-none;
  }

  .articles-track {
    @apply relative pb-12;
    grid-column: 2;
  }

  .articles-track::before,
  .articles-track::after {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    width: 1px;
    background: #dcd6c9;
    opacity: 0.7;
  }

  .articles-track::before {
    left: -15px;
  }

  .articles-track::after {
    right: -15px;
  }

  @media (max-width: 768px) {
    .articles-years {
      display: block;
      margin-bottom: 1.25rem;
      position: static;
    }

    .articles-years ul {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .articles-years li {
      margin: 0;
    }

    .articles-track::before,
    .articles-track::after {
      display: none;
    }
  }

  .year-block {
    @apply mb-2;
  }

  .year-heading {
    @apply font-medium text-[1rem] uppercase mt-0
  }

  .article-entry {
    @apply py-1;
  }

  .article-header {
    @apply flex flex-col gap-1 md:flex-row md:items-baseline md:gap-4;
  }

  .article-title-link {
    @apply font-sans font-medium text-[1.05rem] leading-snug
             underline underline-offset-2 decoration-gray-300
             hover:decoration-black;
  }

  .article-date {
    @apply text-text-muted text-[0.8rem] italic opacity-60;
  }

  .article-summary {
    @apply font-serif text-text-muted text-[0.95rem] leading-relaxed mt-2;
  }

  /* Article Detail Shell */
  .article-shell {
    @apply relative;
  }

  .article-grid {
    @apply relative;
  }

  .article-meta-label {
    @apply text-xs font-bold uppercase tracking-wider text-gray-500 mb-0
  }

  .article-meta-date {
    @apply text-[0.7rem] font-mono;
  }

  .article-meta-sidebar {
    @apply hidden md:block text-[0.85rem] text-text-muted leading-relaxed;
    position: absolute;
    left: -230px;
    top: 0px;
    width: 200px;
    text-align: right;
  }

  .article-meta-inline {
    @apply text-[0.9rem] text-text-muted mb-6 md:hidden;
  }

  .article-toc {
    @apply hidden md:block text-[0.8rem] text-text-muted leading-relaxed;
    position: absolute;
    top: 0px;
    right: -230px;
    width: 200px;
    text-align: left;
  }

  .toc-nav {
    @apply text-[0.8rem] leading-relaxed text-text-muted;
  }

  .toc-nav ol {
    @apply p-0 m-0 space-y-1 pl-5;
    list-style-position: outside;
  }

  .toc-nav .toc-depth-1 {
    list-style-type: decimal;
  }

  .toc-nav .toc-depth-2 {
    list-style-type: lower-alpha;
  }

  .toc-nav .toc-depth-3 {
    list-style-type: lower-roman;
  }

  .toc-nav ol ol {
    @apply mt-2 space-y-1 pl-5;
  }

  .toc-nav a {
    @apply underline;
  }

  .article-toc ol {
    @apply p-0 m-0 space-y-1 pl-5;
    list-style-position: outside;
  }

  .article-toc .toc-depth-1 {
    list-style-type: decimal;
  }

  .article-toc .toc-depth-2 {
    list-style-type: lower-alpha;
  }

  .article-toc .toc-depth-3 {
    list-style-type: lower-roman;
  }

  .article-toc .toc-depth-1 > li > a {
    @apply font-semibold text-text opacity-90
           underline underline-offset-2 decoration-gray-300
           transition-colors;
  }

  .article-toc .toc-depth-1 > li > a:hover {
    @apply decoration-black text-black;
  }

  .article-toc .toc-depth-2 > li > a {
    @apply font-normal text-text opacity-70;
  }

  .article-toc .toc-depth-3 > li > a {
    @apply font-normal text-text opacity-60;
  }

  .article-toc ol ol {
    @apply mt-2 space-y-1 pl-5;
  }

  /* Shelf Layout */
  .shelf-track {
    @apply space-y-12;
  }

  .shelf-index {
    @apply hidden md:block font-sans font-bold text-[0.75rem] uppercase text-text-muted text-right;
    position: absolute;
    left: -110px;
  }

  .shelf-index ul {
    @apply space-y-2;
  }

  .shelf-index a {
    @apply underline underline-offset-2 decoration-gray-300 text-text-muted;
    @apply transition-colors;
  }

  .shelf-index a:hover {
    @apply decoration-black text-black;
  }

  .shelf-section {
    @apply pt-6;
    border-top: 1px solid #dcd6c9;
  }

  .shelf-section:first-of-type {
    border-top: none;
    padding-top: 0;
  }

  .shelf-section-heading {
    @apply font-sans text-2xl font-medium mb-4;
    margin-top: 0px;
  }

  .shelf-list {
    @apply list-none m-0 p-0 space-y-3;
  }

  .shelf-entry-main {
    @apply flex flex-col gap-1 md:flex-row md:items-baseline md:gap-4;
  }

  .shelf-entry-title {
    @apply font-serif text-[1.05rem] font-medium leading-snug
            underline underline-offset-2 decoration-gray-300
            hover:decoration-black;
  }

  .shelf-entry-date {
    @apply text-[0.85rem] text-text-muted italic;
  }

  .pixel-feed {
    @apply space-y-16 max-w-3xl mx-auto;
  }

  .pixel-entry {
    @apply pb-12 border-b border-gray-300;
    overflow: visible;
  }

  .pixel-image {
    @apply w-full max-w-3xl mx-auto rounded-xl mb-4;
  }

  .pixel-image {
    width: 200%;
    max-width: none;
    margin: 0 auto 1rem;
    margin-left: -50%;
    border-radius: 0.75rem;
    display: block;
  }

  .pixel-title {
    @apply font-serif font-semibold text-[1.1rem] mt-2 mb-1;
  }

  .pixel-meta {
    @apply text-text-muted text-[0.85rem] italic;
  }

  .pixel-date {
    @apply italic text-[0.85rem] text-text-muted;
  }

  .pixel-body {
    @apply font-serif article-content text-[0.95rem] opacity-60;
  }

  .about-image {
     width: 200%;
     max-width: none;
     margin: 0 auto 1rem;
     border-radius: 0.75rem;
     display: block;
     @apply rounded-xl mb-12;
  }

  .about-title {
    @apply font-serif font-bold text-[1.3rem] mb-6 text-text;
  }

  .about-body {
    @apply font-serif text-[1.1rem] leading-relaxed opacity-80;
  }

  .about-date {
    @apply text-text-muted text-[0.8rem] italic;
  }

  .site-footer {
    @apply mt-8 pb-8 text-[0.9rem] text-text-muted border-t border-gray-300;
  }
  
  /* Mobile Responsive Styles */
  @media (max-width: 768px) {
    /* Fix oversized desktop title */
    .article-title {
      width: 100%;
      margin-left: 0;
      margin-right: 0;
      font-size: 2.5rem;
      text-align: center;
    }

    /* Page heading */
    .page-heading {
      font-size: 2.5rem;
      width: 100%;
      margin: 2rem 0 1rem 0;
      text-align: center;
    }

    /* Page heading subtitle */
    .page-heading-subtitle {
      font-size: 1rem;
      text-align: center;
      padding: 0 1rem;
    }

    /* Years sidebar on mobile */
    .articles-years {
      left: 0;
      position: static;
      margin-bottom: 1rem;
      text-align: left;
    }

    /* Tags sidebar on mobile */
    .articles-tags {
      position: static;
      width: 100%;
      margin-top: 2rem;
    }

    /* Article layout */
    .article-grid {
      display: block;
      margin: 0;
      padding: 0 0rem;
    }

    .articles-track {
      padding: 0;
      width: 100%;
    }

    /* Prevent overflow from long links and content */
    .article-title-link,
    .article-content {
      word-break: break-word;
      overflow-wrap: break-word;
    }

    /* Adjust meta information */
    .article-meta-sidebar {
      position: static;
      width: 100%;
      text-align: left;
      margin-bottom: 2rem;
    }

    /* Adjust table of contents */
    .article-toc {
      position: static;
      width: 100%;
      margin-top: 2rem;
    }

    /* Navigation */
    .site-nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.5rem 0;
      margin: 0;
      width: 100%;
    }

    .site-nav a {
      white-space: nowrap;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      transition: all 0.2s ease;
    }

    .site-nav a:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    /* Pixels Page Mobile */
    .pixel-feed {
      @apply px-4;
    }

    .pixel-entry {
      @apply mb-12;
    }

    .pixel-image {
      max-height: 75vh;
      @apply -mx-4 w-[calc(100%+2rem)] max-w-none rounded-none;
    }

    .pixel-title {
      @apply text-[1.1rem] mt-4 mb-1;
    }

    .pixel-body {
      @apply text-[0.95rem];
    }

    .pixel-meta {
      @apply text-[0.8rem];
    }
  }
}

